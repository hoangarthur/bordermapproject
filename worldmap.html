<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>U.S. Border Crossings Timeline</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body { margin:0; font-family: Arial, sans-serif; }
        #map { width: 100vw; height: 80vh; }
        .controls {
            padding: 15px;
            background: #fff;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        #yearSlider {
            width: 80%; 
            max-width: 800px; 
            height: 8px;
            border-radius: 5px; 
            background: #ddd; 
            outline: none; 
            margin: 20px auto;
            display: block;
        }
        #currentMonth {
            font-size: 1.4em; font-weight: bold; color: #d32f2f; margin: 10px 0;
        }
        select, button {
            padding: 8px 14px; margin: 0 8px; font-size: 14px; border-radius: 6px; border: 1px solid #ccc;
        }
        button.active { background: #1976d2; color: white; }

        .labels-wrapper { 
            position: relative; 
            height: 34px; 
            margin-top: -8px;      
        }
        
        #monthLabels { 
            position: absolute;
            left: 10%;             
            right: 10%;
            width: 80%;
            max-width: 800px;
            margin: 0 auto;
            height: 100%;
            pointer-events: none;
            top: 0;
        }
        .month-label {
            position: absolute;
            font-size: 13px;
            font-weight: bold;
            color: #333;
            transform: translateX(-50%);
            white-space: nowrap;
            top: 10px;
        }

        #monthLabels .month-label:first-child {
            left: 0% !important;
            transform: none !important;
        }
        #monthLabels .month-label:last-child {
            left: 100% !important;
            transform: translateX(-100%) !important;
        }
        .legend {
            margin: 20px auto 5px;
            padding: 12px;
            background: rgba(255,255,255,0.95);
            border-radius: 8px;
            max-width: 800px;
            font-size: 14px;
            line-height: 1.9;
            box-shadow: 0 1px 6px rgba(0,0,0,0.15);
        }
        .leg { display: inline-block; margin: 0 12px 0 0; }
        .low      { color: rgba(0, 150, 255, 0.8); }
        .med-low  { color: rgba(0, 255, 100, 0.9); }
        .med-high { color: rgba(255, 200, 0, 0.9); }
        .high     { color: rgba(255, 50, 50, 0.9); }
        .size     { color: #555; font-size: 13px; }
</style>
</head>
<body>

<div id="map"></div>

<div class="controls">
    <div class="legend">
        <strong>Crossings (annual or monthly avg)</strong><br/>
        <span class="leg low"> &lt; 25% of maximum</span>
        <span class="leg med-low"> 25–50%</span>
        <span class="leg med-high"> 50–75%</span>
        <span class="leg high"> &gt; 75% of maximum</span>
        <span class="leg size">Circle size = relative volume</span>
    </div>
    <br>
    <div>
        <select id="measureFilter">
            <option value="all">All Traffic Types</option>
        </select>
    </div>

    <div style="margin: 10px 0;">
        <button id="modeYear" class="active">Year View</button>
        <button id="modeMonth">Month View (Average)</button>
    </div>

    <div id="currentMonth">Loading...</div>
    <input type="range" id="yearSlider" min="0" max="100" value="0" step="1"/>
    <div class="labels-wrapper">
        <div id="monthLabels"></div>
    </div>

    
    
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<script src="worldmap.js"></script>
</body>
</html>